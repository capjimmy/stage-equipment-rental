(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38201,e=>{"use strict";let s=(0,e.i(57357).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>s],38201)},82720,e=>{"use strict";let s=(0,e.i(57357).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],82720)},61861,e=>{"use strict";let s=(0,e.i(57357).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>s],61861)},79733,e=>{"use strict";let s=(0,e.i(57357).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>s],79733)},23403,e=>{"use strict";var s=e.i(46628),t=e.i(85251),a=e.i(76993),l=e.i(82720),i=e.i(61861),r=e.i(38201),n=e.i(79733),c=e.i(57357);let o=(0,c.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),d=(0,c.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var x=e.i(53600);e.i(78656);var m=e.i(81485);function h(){let e=(0,a.useSearchParams)(),c=(0,a.useRouter)(),[h,p]=(0,t.useState)(e.get("start")||""),[u,b]=(0,t.useState)(e.get("end")||""),[j,g]=(0,t.useState)(e.get("q")||""),[v,f]=(0,t.useState)(!1),[N,y]=(0,t.useState)(""),[w,k]=(0,t.useState)(""),[S,C]=(0,t.useState)([]),[A,M]=(0,t.useState)(!1),[P,R]=(0,t.useState)(1),[$,q]=(0,t.useState)(!1),L=(0,t.useCallback)(async()=>{M(!0),q(!0);try{let e={q:j||void 0,includeUnavailable:v};h&&u&&(e.startDate=h,e.endDate=u);let s=await m.productApi.search(e);C(s),R(1)}catch(e){console.error("Failed to fetch products:",e);try{let e=await m.productApi.getAll();C(e)}catch{C([])}}finally{M(!1)}},[h,u,j,v]);(0,t.useEffect)(()=>{(async()=>{M(!0);try{if(e.get("q")||e.get("start")&&e.get("end"))await L();else{let e=await m.productApi.getAll();C(e),q(!0)}}catch(e){console.error("Failed to fetch products:",e)}finally{M(!1)}})()},[]);let F=()=>{let e=new URLSearchParams;h&&e.set("start",h),u&&e.set("end",u),j&&e.set("q",j),c.push(`/search?${e.toString()}`,{scroll:!1}),L()},T=S.map(e=>{let s="object"==typeof e.category?e.category?.name:e.category,t="object"==typeof e.supplier?e.supplier?.name:e.supplier,a=e.assets?.length||0,l=void 0!==e.availableCount?e.availableCount:void 0!==e.available?e.available:a>0?a:1;return{id:e.id,title:e.title,price:e.baseDailyPrice?parseFloat(e.baseDailyPrice):e.price||0,available:l,category:s||"의상",condition:e.assets?.[0]?.conditionGrade||e.condition||"A",tags:Array.isArray(e.tags)&&e.tags.length>0&&"object"==typeof e.tags[0]?e.tags.map(e=>e.name):e.tags||[],supplier:t||"공급자",images:e.images,isAvailable:e.isAvailable,unavailableReason:e.unavailableReason}}).filter(e=>(!N||e.category===N)&&(!w||e.condition===w)),z=Math.ceil(T.length/12),B=(P-1)*12,D=T.slice(B,B+12),U=e=>{R(e),window.scrollTo({top:0,behavior:"smooth"})};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-white to-pink-50",children:[(0,s.jsx)("header",{className:"border-b border-violet-100 bg-white/80 backdrop-blur-md sticky top-0 z-50",children:(0,s.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(x.default,{href:"/",className:"flex items-center gap-2",children:[(0,s.jsx)(n.Sparkles,{className:"w-8 h-8 text-violet-600"}),(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 to-pink-600 bg-clip-text text-transparent",children:"Stage Rental"})]}),(0,s.jsxs)("nav",{className:"flex items-center gap-6",children:[(0,s.jsx)(x.default,{href:"/search",className:"text-violet-600 font-medium",children:"검색"}),(0,s.jsx)(x.default,{href:"/about",className:"text-slate-700 hover:text-violet-600 transition-colors",children:"소개"}),(0,s.jsx)("button",{className:"btn btn-outline",children:"로그인"})]})]})})}),(0,s.jsx)("div",{className:"border-b border-violet-100 bg-white/50 backdrop-blur-sm py-6",children:(0,s.jsx)("div",{className:"container mx-auto px-6",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsx)("input",{type:"date",value:h,onChange:e=>p(e.target.value),className:"input",placeholder:"시작일"}),(0,s.jsx)("input",{type:"date",value:u,onChange:e=>b(e.target.value),className:"input",placeholder:"종료일"}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"===e.key&&F()},placeholder:"검색어 입력... (예: 바람사, 나폴레옹)",className:"input"}),(0,s.jsxs)("button",{onClick:F,className:"btn btn-primary",children:[(0,s.jsx)(l.Search,{className:"w-5 h-5"}),"검색"]})]}),(0,s.jsx)("p",{className:"text-sm text-slate-500 mt-2",children:"* 날짜 없이도 검색 가능합니다. 날짜를 입력하면 해당 기간의 대여 가능 여부를 확인할 수 있습니다."})]})})}),(0,s.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,s.jsxs)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,s.jsx)("aside",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"card p-6 sticky top-24",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("h3",{className:"font-bold text-lg flex items-center gap-2",children:[(0,s.jsx)(i.Filter,{className:"w-5 h-5"}),"필터"]})}),(0,s.jsx)("div",{className:"mb-6 pb-6 border-b border-slate-200",children:(0,s.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:v,onChange:e=>f(e.target.checked),className:"w-5 h-5 rounded border-slate-300 text-violet-600 focus:ring-violet-500"}),(0,s.jsx)("span",{className:"text-sm",children:"대여 불가 상품도 표시"})]})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h4",{className:"font-semibold mb-3 text-sm text-slate-700",children:"카테고리"}),(0,s.jsxs)("div",{className:"space-y-2",children:[["의상","소품","악세서리","신발","대도구","무대장치","장비"].map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"category",value:e,checked:N===e,onChange:e=>{y(e.target.value),R(1)},className:"w-4 h-4 text-violet-600 focus:ring-violet-500"}),(0,s.jsx)("span",{className:"text-sm",children:e})]},e)),(0,s.jsx)("button",{onClick:()=>{y(""),R(1)},className:"text-sm text-violet-600 hover:text-violet-700",children:"전체"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h4",{className:"font-semibold mb-3 text-sm text-slate-700",children:"상태"}),(0,s.jsxs)("div",{className:"space-y-2",children:[["A","B","C"].map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"condition",value:e,checked:w===e,onChange:e=>{k(e.target.value),R(1)},className:"w-4 h-4 text-violet-600 focus:ring-violet-500"}),(0,s.jsxs)("span",{className:"text-sm",children:["등급 ",e]})]},e)),(0,s.jsx)("button",{onClick:()=>{k(""),R(1)},className:"text-sm text-violet-600 hover:text-violet-700",children:"전체"})]})]}),(N||w)&&(0,s.jsxs)("div",{className:"pt-4 border-t border-slate-200",children:[(0,s.jsx)("h4",{className:"font-semibold mb-3 text-sm text-slate-700",children:"적용된 필터"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[N&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-violet-100 text-violet-700 rounded-full text-sm",children:[N,(0,s.jsx)("button",{onClick:()=>y(""),children:(0,s.jsx)(r.X,{className:"w-3 h-3"})})]}),w&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-violet-100 text-violet-700 rounded-full text-sm",children:["등급 ",w,(0,s.jsx)("button",{onClick:()=>k(""),children:(0,s.jsx)(r.X,{className:"w-3 h-3"})})]})]})]})]})}),(0,s.jsxs)("main",{className:"lg:col-span-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"검색 결과"}),(0,s.jsxs)("p",{className:"text-slate-600",children:[T.length,"개의 상품을 찾았습니다",h&&u&&(0,s.jsxs)("span",{className:"text-violet-600 font-medium ml-2",children:["(",h," ~ ",u,")"]}),z>1&&(0,s.jsxs)("span",{className:"text-slate-500 ml-2",children:["(페이지 ",P,"/",z,")"]})]})]}),(0,s.jsxs)("select",{className:"px-4 py-2 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-violet-500",children:[(0,s.jsx)("option",{children:"인기순"}),(0,s.jsx)("option",{children:"가격 낮은순"}),(0,s.jsx)("option",{children:"가격 높은순"}),(0,s.jsx)("option",{children:"신규순"})]})]}),A?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-violet-600 mb-4"}),(0,s.jsx)("p",{className:"text-slate-600",children:"상품을 불러오는 중..."})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid md:grid-cols-2 xl:grid-cols-3 gap-6",children:D.map(e=>(0,s.jsxs)(x.default,{href:`/product/${e.id}${h&&u?`?start=${h}&end=${u}`:""}`,className:`card overflow-hidden group cursor-pointer relative ${0===e.available?"opacity-75":""}`,children:[0===e.available&&(0,s.jsx)("div",{className:"absolute top-4 left-4 bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-medium z-10",children:"선예약 존재"}),(0,s.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-violet-200 to-pink-200 overflow-hidden",children:[e.images&&e.images.length>0?(0,s.jsx)("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}}):null,(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),e.available>0&&(0,s.jsxs)("div",{className:"absolute top-4 right-4 bg-white px-3 py-1 rounded-full text-sm font-medium",children:[e.available,"개 가능"]}),0===e.available&&(0,s.jsx)("div",{className:"absolute top-4 right-4 bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-sm font-medium",children:"0개 가능"}),(0,s.jsx)("div",{className:"absolute bottom-4 left-4",children:(0,s.jsxs)("span",{className:"inline-block px-2 py-1 bg-white/90 rounded text-xs font-medium",children:["등급 ",e.condition]})})]}),(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-2 group-hover:text-violet-600 transition-colors line-clamp-2",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-slate-500 mb-3",children:e.supplier}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mb-4",children:e.tags.slice(0,3).map(e=>(0,s.jsxs)("span",{className:"tag text-xs",children:["#",String(e)]},String(e)))}),0===e.available?(0,s.jsx)("div",{className:"text-sm text-orange-600 mb-2",children:e.unavailableReason||"해당 기간에 선예약이 있습니다"}):null,(0,s.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-slate-100",children:[(0,s.jsxs)("span",{className:"text-xl font-bold text-violet-600",children:[e.price.toLocaleString(),"원",(0,s.jsx)("span",{className:"text-xs text-slate-500 font-normal",children:"/일"})]}),(0,s.jsx)("button",{className:`btn py-2 px-4 text-sm ${e.available>0?"btn-primary":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,disabled:0===e.available,children:e.available>0?"담기":"불가"})]})]})]},e.id))}),z>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-8",children:[(0,s.jsx)("button",{onClick:()=>U(P-1),disabled:1===P,className:"p-2 rounded-lg border border-slate-300 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(o,{className:"w-5 h-5"})}),(()=>{let e=[];if(z<=5)for(let s=1;s<=z;s++)e.push(s);else if(P<=3){for(let s=1;s<=4;s++)e.push(s);e.push("..."),e.push(z)}else if(P>=z-2){e.push(1),e.push("...");for(let s=z-3;s<=z;s++)e.push(s)}else{e.push(1),e.push("...");for(let s=P-1;s<=P+1;s++)e.push(s);e.push("..."),e.push(z)}return e})().map((e,t)=>"number"==typeof e?(0,s.jsx)("button",{onClick:()=>U(e),className:`w-10 h-10 rounded-lg font-medium transition-colors ${P===e?"bg-violet-600 text-white":"border border-slate-300 hover:bg-slate-100"}`,children:e},t):(0,s.jsx)("span",{className:"px-2 text-slate-400",children:e},t)),(0,s.jsx)("button",{onClick:()=>U(P+1),disabled:P===z,className:"p-2 rounded-lg border border-slate-300 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(d,{className:"w-5 h-5"})})]})]}),!A&&0===T.length&&$&&(0,s.jsxs)("div",{className:"text-center py-20",children:[(0,s.jsx)(l.Search,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-bold mb-2",children:"검색 결과가 없습니다"}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:"다른 검색어나 필터를 시도해보세요"}),(0,s.jsx)(x.default,{href:"/",className:"btn btn-primary",children:"홈으로 돌아가기"})]})]})]})}),(0,s.jsx)(x.default,{href:"/cart",className:"fixed bottom-8 right-8 w-16 h-16 bg-gradient-to-br from-violet-500 to-pink-500 text-white rounded-full shadow-2xl hover:scale-110 transition-transform flex items-center justify-center",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,s.jsx)("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-pink-500 text-white text-xs rounded-full flex items-center justify-center",children:"0"})]})})]})}function p(){return(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(h,{})})}e.s(["default",()=>p],23403)},50802,e=>{e.v(s=>Promise.all(["static/chunks/e98bfbd27513173c.js"].map(s=>e.l(s))).then(()=>s(12523)))}]);